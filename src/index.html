<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Child Care Subsidy Calculator - Australia</title>
    <meta name="description" content="Calculate your Child Care Subsidy (CCS) entitlements and out-of-pocket childcare costs in Australia">
    <link rel="stylesheet" href="styles.css">
    <script src="lib/chart.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Child Care Subsidy Calculator</h1>
            <p class="subtitle">Estimate your CCS entitlements and childcare costs</p>
            <p class="disclaimer">Based on 2025-26 Australian Government rates</p>
        </div>
    </header>
    
    <main>
        <div class="container">
            <!-- Preset Selector -->
            <section class="preset-section">
                <div class="preset-header">
                    <h2 class="preset-title">Quick Start</h2>
                    <p class="preset-description">Start with a common scenario or enter your own details below</p>
                </div>
                <div class="preset-selector">
                    <label for="scenario-preset">Choose a preset scenario:</label>
                    <select id="scenario-preset" class="form-control">
                        <option value="">-- Custom (enter your own) --</option>
                        <option value="full-time-both">Full-time Both Parents (5+5 days)</option>
                        <option value="full-time-one">Full-time One Parent (5+0 days)</option>
                        <option value="part-time-both">Part-time Both Parents (3+3 days)</option>
                        <option value="full-part">Full-time + Part-time (5+3 days)</option>
                        <option value="four-four">Four Days Each (4+4 days)</option>
                        <option value="compressed">Compressed Week (4+0 days)</option>
                    </select>
                </div>
            </section>
            
            <!-- Calculator Form -->
            <form id="ccs-calculator-form" class="calculator-form" novalidate>
                
                <!-- Parent 1 Section -->
                <section class="form-section" id="parent1-section">
                    <h2 class="section-title">
                        <span class="section-number">1</span>
                        Parent 1 Income & Work Details
                    </h2>
                    
                    <div class="form-group">
                        <label for="parent1-income">
                            Full-Time Equivalent Annual Income (AUD)
                            <span class="required" aria-label="required">*</span>
                        </label>
                        <p class="help-text">Enter your annual income as if working full-time (5 days/week at your current rate). If you work part-time, enter what you would earn at this rate working full-time.</p>
                        <div class="input-wrapper">
                            <span class="input-prefix">$</span>
                            <input 
                                type="number" 
                                id="parent1-income" 
                                name="parent1-income"
                                min="0" 
                                max="10000000"
                                step="1000"
                                required
                                aria-required="true"
                                aria-describedby="parent1-income-error parent1-income-help"
                            >
                        </div>
                        <div id="parent1-adjusted-income-display" class="adjusted-income-display" style="display: none;">
                            <strong>Adjusted Income for calculation:</strong> <span id="parent1-adjusted-income-value"></span>
                            <span id="parent1-income-percentage"></span>
                        </div>
                        <span class="error-message" id="parent1-income-error" role="alert"></span>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="parent1-days">
                                Work Days per Week
                                <span class="required" aria-label="required">*</span>
                            </label>
                            <input 
                                type="number" 
                                id="parent1-days" 
                                name="parent1-days"
                                min="0" 
                                max="5"
                                step="1"
                                value="5"
                                required
                                aria-required="true"
                                aria-describedby="parent1-days-error"
                            >
                            <span class="error-message" id="parent1-days-error" role="alert"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="parent1-hours">
                                Hours per Day
                                <span class="required" aria-label="required">*</span>
                            </label>
                            <input 
                                type="number" 
                                id="parent1-hours" 
                                name="parent1-hours"
                                min="0" 
                                max="24"
                                step="0.5"
                                value="7.6"
                                required
                                aria-required="true"
                                aria-describedby="parent1-hours-error"
                            >
                            <span class="error-message" id="parent1-hours-error" role="alert"></span>
                        </div>
                    </div>
                    
                    <!-- Work Days Selection -->
                    <div class="form-group">
                        <label>Which Days Do You Work? <span class="required" aria-label="required">*</span></label>
                        <p class="help-text">Select the specific days you work each week</p>
                        <div class="checkbox-group work-days-group" id="parent1-work-days">
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent1-workday" value="monday" checked>
                                <span>Monday</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent1-workday" value="tuesday" checked>
                                <span>Tuesday</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent1-workday" value="wednesday" checked>
                                <span>Wednesday</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent1-workday" value="thursday" checked>
                                <span>Thursday</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent1-workday" value="friday" checked>
                                <span>Friday</span>
                            </label>
                        </div>
                        <span class="error-message" id="parent1-workdays-error" role="alert"></span>
                    </div>
                </section>

                <!-- Parent 2 Section -->
                <section class="form-section" id="parent2-section">
                    <h2 class="section-title">
                        <span class="section-number">2</span>
                        Parent 2 Income & Work Details
                        <span class="optional-label">(Optional)</span>
                    </h2>
                    
                    <div class="form-group">
                        <label for="parent2-income">Full-Time Equivalent Annual Income (AUD)</label>
                        <p class="help-text">Enter your annual income as if working full-time (5 days/week at your current rate). If you work part-time, enter what you would earn at this rate working full-time.</p>
                        <div class="input-wrapper">
                            <span class="input-prefix">$</span>
                            <input 
                                type="number" 
                                id="parent2-income" 
                                name="parent2-income"
                                min="0" 
                                max="10000000"
                                step="1000"
                                aria-describedby="parent2-income-error parent2-income-help"
                            >
                        </div>
                        <div id="parent2-adjusted-income-display" class="adjusted-income-display" style="display: none;">
                            <strong>Adjusted Income for calculation:</strong> <span id="parent2-adjusted-income-value"></span>
                            <span id="parent2-income-percentage"></span>
                        </div>
                        <span class="error-message" id="parent2-income-error" role="alert"></span>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="parent2-days">Work Days per Week</label>
                            <input 
                                type="number" 
                                id="parent2-days" 
                                name="parent2-days"
                                min="0" 
                                max="5"
                                step="1"
                                aria-describedby="parent2-days-error"
                            >
                            <span class="error-message" id="parent2-days-error" role="alert"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="parent2-hours">Hours per Day</label>
                            <input 
                                type="number" 
                                id="parent2-hours" 
                                name="parent2-hours"
                                min="0" 
                                max="24"
                                step="0.5"
                                aria-describedby="parent2-hours-error"
                            >
                            <span class="error-message" id="parent2-hours-error" role="alert"></span>
                        </div>
                    </div>
                    
                    <!-- Work Days Selection -->
                    <div class="form-group" id="parent2-workdays-container">
                        <label>Which Days Does Parent 2 Work?</label>
                        <p class="help-text">Select the specific days parent 2 works each week</p>
                        <div class="checkbox-group work-days-group" id="parent2-work-days">
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent2-workday" value="monday">
                                <span>Monday</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent2-workday" value="tuesday">
                                <span>Tuesday</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent2-workday" value="wednesday">
                                <span>Wednesday</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent2-workday" value="thursday">
                                <span>Thursday</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="parent2-workday" value="friday">
                                <span>Friday</span>
                            </label>
                        </div>
                        <span class="error-message" id="parent2-workdays-error" role="alert"></span>
                    </div>
                </section>

                <!-- Children Section -->
                <section class="form-section" id="children-section">
                    <h2 class="section-title">
                        <span class="section-number">3</span>
                        Children & Childcare Details
                    </h2>
                    
                    <div id="children-container" role="list">
                        <!-- Child inputs will be added dynamically -->
                    </div>
                    
                    <button 
                        type="button" 
                        id="add-child-btn" 
                        class="btn btn-secondary"
                        aria-label="Add another child"
                    >
                        + Add Child
                    </button>
                </section>

                <!-- Calculate Button -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary" id="calculate-btn">
                        Calculate CCS
                    </button>
                    <button type="button" class="btn btn-secondary" id="reset-btn">
                        Reset Form
                    </button>
                    <button type="button" class="btn btn-danger" id="clear-data-btn">
                        Clear Saved Data
                    </button>
                </div>
                
                <!-- Privacy Notice -->
                <div class="privacy-notice">
                    <p>
                        <strong>üîí Your Privacy:</strong> Your data is only stored on this device in your browser (Local Storage). 
                        It is briefly processed by our server for calculation purposes and may appear in temporary logging. 
                        It is never stored on our servers for any other purpose and is never sold.
                    </p>
                </div>
            </form>

            <!-- Results Section -->
            <section class="results-section" id="results-section" aria-live="polite" aria-atomic="true" hidden>
                <div class="results-header">
                    <h2 class="results-title">Your CCS Estimate</h2>
                    <div class="view-toggle">
                        <label class="toggle-label">
                            <span class="toggle-option">Weekly</span>
                            <input type="checkbox" id="annual-toggle" class="toggle-input" aria-label="Toggle between weekly and annual view">
                            <span class="toggle-slider"></span>
                            <span class="toggle-option">Annual</span>
                        </label>
                    </div>
                </div>
                
                <!-- Summary Cards -->
                <div class="results-summary">
                    <div class="summary-card">
                        <div class="card-label">Household Income</div>
                        <div class="card-value" id="result-household-income">$0</div>
                        <div class="card-sublabel">Adjusted annual income</div>
                    </div>
                    
                    <div class="summary-card highlight">
                        <div class="card-label">Weekly Subsidy</div>
                        <div class="card-value" id="result-weekly-subsidy">$0</div>
                        <div class="card-sublabel">Government contribution</div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="card-label">Weekly Out-of-Pocket</div>
                        <div class="card-value" id="result-weekly-gap">$0</div>
                        <div class="card-sublabel">Your cost</div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="card-label">Net Annual Income</div>
                        <div class="card-value" id="result-net-income">$0</div>
                        <div class="card-sublabel">After childcare costs</div>
                    </div>
                </div>

                <!-- Detailed Results -->
                <div class="results-details">
                    <h3>Breakdown by Child</h3>
                    <div id="children-results" class="children-results">
                        <!-- Child results will be added dynamically -->
                    </div>
                    
                    <div class="activity-test-info">
                        <h3>Activity Test Results</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Subsidised Hours per Week:</span>
                                <span class="info-value" id="result-subsidised-hours">0</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Childcare Cost as % of Income:</span>
                                <span class="info-value" id="result-cost-percentage">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Optimal Scenario Selection Section -->
            <section id="comparison-section" class="results-section" style="display: none;" aria-live="polite">
                <div class="section-header">
                    <h2>Optimal Scenario Selection</h2>
                    <p class="section-description">Compare all work arrangements to find the optimal balance between income and childcare costs. Each scenario shows the effect of different work day combinations on your family's finances.</p>
                </div>
                
                <div class="comparison-controls">
                    <div class="controls-group">
                        <button type="button" id="generate-all-scenarios-btn" class="btn btn-primary">
                            Generate All Scenarios
                        </button>
                        <button type="button" id="generate-common-scenarios-btn" class="btn btn-secondary">
                            Show Common Scenarios Only
                        </button>
                    </div>
                    
                    <div class="controls-group">
                        <label for="scenario-sort">Sort by:</label>
                        <select id="scenario-sort" class="form-control">
                            <option value="netIncome">Net Income (Highest)</option>
                            <option value="outOfPocket">Out-of-Pocket (Lowest)</option>
                            <option value="subsidy">Subsidy (Highest)</option>
                            <option value="workDays">Work Days</option>
                        </select>
                        
                        <div class="export-controls">
                            <button type="button" id="export-csv-btn" class="btn btn-secondary">
                                üìä Export CSV
                            </button>
                            <button type="button" id="print-btn" class="btn btn-secondary">
                                üñ®Ô∏è Print / PDF
                            </button>
                            <button type="button" id="share-link-btn" class="btn btn-secondary">
                                üîó Share Link
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="scenario-info">
                    <p><strong>Note:</strong> Scenarios consider that when a parent isn't working, they're available for childcare, reducing childcare hours and costs.</p>
                </div>
                
                <!-- Charts Section -->
                <div id="charts-section" class="charts-section" style="display: none;">
                    <div class="charts-header">
                        <h3>Visual Comparison</h3>
                        <div class="chart-toggle">
                            <button type="button" id="toggle-chart-btn" class="btn btn-secondary">
                                Show Charts
                            </button>
                        </div>
                    </div>
                    <div id="charts-container" class="charts-container" style="display: none;">
                        <div class="chart-wrapper">
                            <div id="bar-chart-container" class="chart-container">
                                <!-- Bar chart will be inserted here -->
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <div id="pie-chart-container" class="chart-container">
                                <!-- Pie chart will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="comparison-table-container" class="comparison-table-container">
                    <!-- Comparison table will be inserted here -->
                </div>
            </section>
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <p class="footer-disclaimer">
                <strong>Disclaimer:</strong> This calculator provides estimates only. 
                Actual subsidy amounts may vary. Please visit 
                <a href="https://www.servicesaustralia.gov.au/child-care-subsidy" target="_blank" rel="noopener noreferrer">
                    Services Australia
                </a> for official information.
            </p>
            <p class="footer-copyright">&copy; 2026 CCS Calculator</p>
        </div>
    </footer>
    
    <script type="module" src="app.js"></script>
</body>
</html>
